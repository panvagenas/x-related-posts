/**
 * Created by vagenas on 5/5/2015.
 */

(function ($) {
    var extension = $xd_v141226_dev.$.extension_class('x_related_posts', '$ajax');

    $mainThemeSelect = $('#main-theme');

    $x_related_posts.$ajax = new extension();

    $x_related_posts.$ajax.generateXMLNow = function () {
        $x_related_posts.$ajax.post(
            '©ajax.®ajaxGetThemeOptions',
            $x_related_posts.$ajax.___private_type,
            [$mainThemeSelect.val()],
            {
                complete: function (response) {
                    var json = response.responseJSON;
                    if(json.data.html != undefined){
                        $('#main-theme-options-wrapper').html(json.data.html);
                    }
                },
                beforeSend: function () {
                    return true;
                },
            }
        );
    };

    $x_related_posts.$ajax.generateXMLNow();
    $mainThemeSelect.change(function(){
        $x_related_posts.$ajax.generateXMLNow();
    });
})(jQuery);